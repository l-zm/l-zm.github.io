<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Lizm&#39;s Personal Blog</title>
  <subtitle>You really have two down son (你真有两下子)</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-10-17T17:32:52.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Lizm</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringMVC 操作 Redis</title>
    <link href="http://yoursite.com/2016/10/18/021%20SpringMVC%20%E6%93%8D%E4%BD%9C%20Redis/"/>
    <id>http://yoursite.com/2016/10/18/021 SpringMVC 操作 Redis/</id>
    <published>2016-10-18T00:00:00.000Z</published>
    <updated>2016-10-17T17:32:52.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><pre><code>Java
SpringMVC
Maven
</code></pre><p><strong> 依赖包 </strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.1.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><strong> spring-data-redis </strong><br>使用 spring-data-redis ，即省去了自己实现注入的过程，通过它提供的一些配置，即可实现连接池配置、RedisTemplate 配置、JedisConnectionFactory 配置；通过 JedisConnectionFactory 可配置连接池参数、redis 服务器、端口、密码、超时时间、database索引等；RedisTemplate 即注入的bean ，可以使用 RedisTemplate 自动注入的实体进行 redis 的一系列操作</p>
</blockquote>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p><strong> redis.properties </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">redis.host=127.0.0.1</div><div class="line">redis.port=6379</div><div class="line">redis.pass=</div><div class="line">redis.maxIdle=300</div><div class="line">redis.maxActive=300</div><div class="line">redis.maxWait=1000</div><div class="line">redis.timeout=3000</div><div class="line">redis.testOnBorrow=true</div><div class="line">redis.database=20</div></pre></td></tr></table></figure>
<p><strong> spring-redis.xml </strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans </span></div><div class="line">       http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"poolConfig"</span> <span class="attr">class</span>=<span class="string">"redis.clients.jedis.JedisPoolConfig"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.maxIdle&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxTotal"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.maxActive&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxWaitMillis"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.maxWait&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testOnBorrow"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.testOnBorrow&#125;"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Redis 服务器中心 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"connectionFactory"</span> </span></div><div class="line">    	<span class="attr">class</span>=<span class="string">"org.springframework.data.redis.connection.jedis.JedisConnectionFactory"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"poolConfig"</span> <span class="attr">ref</span>=<span class="string">"poolConfig"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"port"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.port&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hostName"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.host&#125;"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeout"</span> <span class="attr">value</span>=<span class="string">"$&#123;redis.timeout&#125;"</span>/&gt;</span></div><div class="line">        <span class="comment">&lt;!--&lt;property name="database" value="1"/&gt;--&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"stringRedisSerializer"</span> </span></div><div class="line">    	<span class="attr">class</span>=<span class="string">"org.springframework.data.redis.serializer.StringRedisSerializer"</span>/&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"commonRedisTemplate"</span> <span class="attr">class</span>=<span class="string">"org.springframework.data.redis.core.RedisTemplate"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"connectionFactory"</span> <span class="attr">ref</span>=<span class="string">"connectionFactory"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"keySerializer"</span> <span class="attr">ref</span>=<span class="string">"stringRedisSerializer"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hashKeySerializer"</span> <span class="attr">ref</span>=<span class="string">"stringRedisSerializer"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"valueSerializer"</span> <span class="attr">ref</span>=<span class="string">"stringRedisSerializer"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hashValueSerializer"</span> <span class="attr">ref</span>=<span class="string">"stringRedisSerializer"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong> applicationContext.xml </strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--引入配置文件--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"configProperties"</span></span></div><div class="line">          <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertiesFactoryBean"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"locations"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 引入jdbc配置文件 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:mybatis/jdbc.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!--引入redis配置文件--&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:redis/redis.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!--引入一些常量配置--&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>classpath:config.properties<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 自动扫描 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.l-zm.*"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"propertyConfigurer"</span></span></div><div class="line">          <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PreferencesPlaceholderConfigurer"</span>&gt;</div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"properties"</span> <span class="attr">ref</span>=<span class="string">"configProperties"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:mybatis/spring-mybatis.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:redis/spring-redis.xml"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">"classpath:mvc-dispatcher-servlet.xml"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="定义接口"><a href="#定义接口" class="headerlink" title="定义接口"></a>定义接口</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * User: Lim</div><div class="line"> * Date: 2016-10-18</div><div class="line"> * Time: 18:39</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IRedisCache</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 设置 一个 缓存</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@param</span> value</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(String key, String value)</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 设置 制定缓存时间的 缓存</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@param</span> value</div><div class="line">     * <span class="doctag">@param</span> liveTime</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(String key, String value, <span class="keyword">int</span> liveTime)</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取该key的缓存</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function">String <span class="title">get</span><span class="params">(String key)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 删除一个 字符串key</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(String key)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 根据匹配符查找缓存</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> pattern</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function">Set&lt;String&gt; <span class="title">keys</span><span class="params">(String pattern)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 判断是否存在该key的缓存数据</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">exists</span><span class="params">(String key)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="实现接口"><a href="#实现接口" class="headerlink" title="实现接口"></a>实现接口</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.l-zm.common.service.impl;</div><div class="line"></div><div class="line"><span class="keyword">import</span> com.huohao.common.service.IRedisCache;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</div><div class="line"><span class="keyword">import</span> org.springframework.dao.DataAccessException;</div><div class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnection;</div><div class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisCallback;</div><div class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</div><div class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</div><div class="line"><span class="keyword">import</span> javax.annotation.Resource;</div><div class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</div><div class="line"><span class="keyword">import</span> java.util.HashSet;</div><div class="line"><span class="keyword">import</span> java.util.Set;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * User: Lim</div><div class="line"> * Date: 2016-10-18</div><div class="line"> * Time: 18:39</div><div class="line"> */</div><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedisCache</span> <span class="keyword">implements</span> <span class="title">IRedisCache</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Resource</span>(name=<span class="string">"commonRedisTemplate"</span>)</div><div class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, String&gt; commonRedisTemplate;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 添加key value</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@param</span> value</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String key, String value)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(key)) &#123; <span class="keyword">return</span>; &#125;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(value)) &#123; <span class="keyword">return</span>; &#125;</div><div class="line">        <span class="keyword">final</span> String keyf = key;</div><div class="line">        <span class="keyword">final</span> String valuef = value;</div><div class="line">        commonRedisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;Object&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Long <span class="title">doInRedis</span><span class="params">(RedisConnection connection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</div><div class="line">                <span class="keyword">byte</span>[] keyb = keyf.getBytes();</div><div class="line">                <span class="keyword">byte</span>[] valueb = valuef.getBytes();</div><div class="line">                connection.set(keyb, valueb);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 添加key value 并且设置存活时间</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@param</span> value</div><div class="line">     * <span class="doctag">@param</span> liveTime 分钟</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(String key, String value, <span class="keyword">int</span> liveTime)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(key)) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(value)) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(liveTime)) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">final</span> Long liveTimeLong = Long.parseLong(liveTime+<span class="string">""</span>);</div><div class="line">        <span class="keyword">final</span> String keyf = key;</div><div class="line">        <span class="keyword">final</span> String valuef = value;</div><div class="line">        commonRedisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;Object&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Long <span class="title">doInRedis</span><span class="params">(RedisConnection connection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</div><div class="line">                <span class="keyword">byte</span>[] keyb = keyf.getBytes();</div><div class="line">                <span class="keyword">byte</span>[] valueb = valuef.getBytes();</div><div class="line">                connection.setEx(keyb, liveTimeLong, valueb);</div><div class="line">                <span class="keyword">return</span> <span class="number">1L</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 获取redis value (String)</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> String keyF = key;</div><div class="line">        String resultStr;</div><div class="line">        resultStr = commonRedisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;String&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">doInRedis</span><span class="params">(RedisConnection redisConnection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</div><div class="line">                <span class="keyword">byte</span>[] key = keyF.getBytes();</div><div class="line">                <span class="keyword">byte</span>[] value = redisConnection.get(key);</div><div class="line">                <span class="keyword">if</span> (value == <span class="keyword">null</span>) &#123; <span class="keyword">return</span> <span class="keyword">null</span>; &#125;</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> String(value, <span class="string">"UTF-8"</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> resultStr;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 通过key删除</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     */</div><div class="line">     <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">del</span><span class="params">(String key)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(key)) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">final</span> String keyf = key;</div><div class="line">        commonRedisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;Void&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Void <span class="title">doInRedis</span><span class="params">(RedisConnection connection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</div><div class="line">                <span class="keyword">byte</span>[] keyb = keyf.getBytes();</div><div class="line">                connection.del(keyb);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 通过正则匹配keys</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> pattern</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> Set&lt;String&gt; <span class="title">keys</span><span class="params">(String pattern)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> String patternF = pattern;</div><div class="line">        Set&lt;<span class="keyword">byte</span>[]&gt; byteSet;</div><div class="line">        byteSet = commonRedisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;Set&lt;<span class="keyword">byte</span>[]&gt;&gt;() &#123;</div><div class="line">            <span class="keyword">public</span> Set&lt;<span class="keyword">byte</span>[]&gt; doInRedis(RedisConnection redisConnection) <span class="keyword">throws</span> DataAccessException &#123;</div><div class="line">                <span class="keyword">byte</span>[] patternB = patternF.getBytes();</div><div class="line">                Set&lt;<span class="keyword">byte</span>[]&gt; valueSet = redisConnection.keys(patternB);</div><div class="line">                <span class="keyword">if</span> (valueSet == <span class="keyword">null</span>) &#123; <span class="keyword">return</span> <span class="keyword">null</span>; &#125;</div><div class="line">                <span class="keyword">return</span> valueSet;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        Set&lt;String&gt; returnSet = <span class="keyword">new</span> HashSet&lt;String&gt;();</div><div class="line">        String stringValue = <span class="string">""</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">byte</span>[] byteValue : byteSet)&#123;</div><div class="line">            <span class="keyword">try</span> &#123;</div><div class="line">                stringValue = <span class="keyword">new</span> String(byteValue, <span class="string">"UTF-8"</span>);</div><div class="line">            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            returnSet.add(stringValue);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> returnSet;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 检查key是否已经存在</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> key</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exists</span><span class="params">(String key)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> String keyF = key;</div><div class="line">        Boolean object;</div><div class="line">        object = commonRedisTemplate.execute(<span class="keyword">new</span> RedisCallback&lt;Boolean&gt;() &#123;</div><div class="line">            <span class="function"><span class="keyword">public</span> Boolean <span class="title">doInRedis</span><span class="params">(RedisConnection redisConnection)</span> <span class="keyword">throws</span> DataAccessException </span>&#123;</div><div class="line">                <span class="keyword">byte</span>[] keyB = keyF.getBytes();</div><div class="line">                <span class="keyword">return</span> redisConnection.exists(keyB);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">return</span> object;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Resource</span></div><div class="line"><span class="keyword">private</span> IRedisCache redisCache;</div><div class="line"></div><div class="line"><span class="meta">@ResponseBody</span></div><div class="line"><span class="meta">@RequestMapping</span>(<span class="string">"redis"</span>)</div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">redis</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">    <span class="keyword">try</span> &#123;</div><div class="line">        redisCache.set(<span class="string">"Lim:"</span> + name,<span class="string">"lizhimin01"</span>, FIVE_MINUTE);</div><div class="line">        Set&lt;String&gt; lim =  redisCache.keys(<span class="string">"Lim:*"</span>);</div><div class="line">        System.out.println(lim.size());</div><div class="line">    &#125; <span class="keyword">catch</span> (Exception ex) &#123;</div><div class="line">        ex.printStackTrace();</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="string">"ok"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><br><br><code>SpringMVC</code> <code>Redis</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;Java
SpringMVC
Maven
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt; 依赖包 &lt;/strong&gt;&lt;/p
    
    </summary>
    
    
      <category term="SpringMVC" scheme="http://yoursite.com/tags/SpringMVC/"/>
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Redis 安装及 Redis-sentinel (哨兵模式)集群方案配置</title>
    <link href="http://yoursite.com/2016/10/14/020%20Redis%E5%AE%89%E8%A3%85%E5%8F%8ARedis-sentinel%20(%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F)%E9%9B%86%E7%BE%A4%E6%96%B9%E6%A1%88%E9%85%8D%E7%BD%AE/"/>
    <id>http://yoursite.com/2016/10/14/020 Redis安装及Redis-sentinel (哨兵模式)集群方案配置/</id>
    <published>2016-10-14T00:00:00.000Z</published>
    <updated>2016-10-20T08:19:51.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><pre><code>http://redis.io
</code></pre><h1 id="解压-安装"><a href="#解压-安装" class="headerlink" title="解压 安装"></a>解压 安装</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tar xvzf redis-3.2.4.tar.gz</div><div class="line">mv redis-3.2.4 /usr/local</div><div class="line">cd /usr/local/redis-3.2.4/</div><div class="line">make</div><div class="line">make test</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>问题1: </strong><br>make[2]: cc: Command not found<br>异常原因：没有安装 gcc<br>解决方案：<code>yum install gcc-c++</code><br><strong>问题2: </strong><br>You need tcl 8.5 or newer in order to run the Redis test<br>异常原因：没有安装 tcl<br>解决方案：<code>yum install -y tcl</code><br>解决方案 (Ubuntu)：<code>apt-get install tcl8.5 tcl8.5-dev tk8.5 tk8.5-dev</code><br><strong>问题3: </strong><br>zmalloc.h:51:31: error: jemalloc/jemalloc.h: No such file or directory<br>异常原因：一些编译依赖或原来编译遗留出现的问题<br>解决方案：<code>make distclean</code> 清理一下 然后再 <code>make</code><br><strong>问题4: </strong><br>E: Unable to fetch some archives, maybe run apt-get update or try with –fix-missing?<br>解决方案：<code>apt-get update</code></p>
</blockquote>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>在 make 成功以后 会在 src 目录下多出一些可执行文件：<code>redis-server</code> <code>redis-cli</code> <code>redis-sentinel</code> 等等</p>
<p>设置命令:</p>
<pre><code>cp redis-server /usr/local/bin/
cp redis-cli /usr/local/bin/
cp redis-sentinel /usr/local/bin/
</code></pre><h1 id="Redis-sentinel-哨兵模式-集群方案配置"><a href="#Redis-sentinel-哨兵模式-集群方案配置" class="headerlink" title="Redis-sentinel (哨兵模式) 集群方案配置"></a>Redis-sentinel (哨兵模式) 集群方案配置</h1><p><strong>说明: 两个 Redis-sentinel 服务, 一个 Redis 主服务, 三个从服务 (通过不同的端口进行配置, 项目中应该是6台服务器)</strong></p>
<ul>
<li><code>cd /usr/local</code> 创建 6 个目录 <code>mkdir redis-7501 redis-7502 redis-7503 redis-7504 redis-7505 redis-7506</code></li>
<li><code>cp /usr/local/redis-3.2.4/redis.conf /usr/local/redis-7501/redis-7501.conf</code></li>
<li><code>cp /usr/local/redis-3.2.4/redis.conf /usr/local/redis-7502/redis-7502.conf</code></li>
<li><code>cp /usr/local/redis-3.2.4/redis.conf /usr/local/redis-7503/redis-7503.conf</code></li>
<li><code>cp /usr/local/redis-3.2.4/redis.conf /usr/local/redis-7504/redis-7504.conf</code></li>
<li><code>cp /usr/local/redis-3.2.4/sentinel.conf /usr/local/redis-7505/sentinel-7505.conf</code></li>
<li><code>cp /usr/local/redis-3.2.4/sentinel.conf /usr/local/redis-7506/sentinel-7506.conf</code></li>
<li>每个 Redis 目录下 建立 <code>run</code> <code>log</code> 文件夹 记录 Redis 日志和文件</li>
</ul>
<p>此处以修改 <code>redis-7501.conf</code> 为例: <code>vim redis-7501.conf</code></p>
<pre><code>要修改的:

bind 127.0.0.1
port 7501
daemonize yes
pidfile /usr/local/redis-7501/run/redis_7501.pid
logfile &quot;/usr/local/redis-7501/log/redis-7501.log&quot;
</code></pre><p>此处以修改 <code>sentinel-7505.conf</code> 为例: <code>vim sentinel-7505.conf</code></p>
<pre><code>要修改的:

port 7505
sentinel monitor mymaster 127.0.0.1 7501 2

启动四个redis实例，其中端口为7501的redis设为master，其他三个设为slave 
所以 mymaster 后跟的是 master 的 ip 和端口,最后一个’2’代表我要启动只要有2个sentinel认为master下线，
就认为该master客观下线，启动failover并选举产生新的master。通常最后一个参数不能多于启动的sentinel实例数
</code></pre><h2 id="启动-Redis-和-sentinel"><a href="#启动-Redis-和-sentinel" class="headerlink" title="启动 Redis 和 sentinel"></a>启动 Redis 和 sentinel</h2><p><strong>分别启动4个 Redis 实例</strong></p>
<ul>
<li><code>redis-server /usr/local/redis-7501/redis-7501.conf</code></li>
<li><code>redis-server /usr/local/redis-7502/redis-7502.conf</code></li>
<li><code>redis-server /usr/local/redis-7503/redis-7503.conf</code></li>
<li><code>redis-server /usr/local/redis-7504/redis-7504.conf</code></li>
</ul>
<p><strong>然后分别登陆 7502 7503 7504 三个实例，动态改变主从关系，成为 7501 的 slave </strong></p>
<ul>
<li><code>redis-cli -h 127.0.0.1 -p 7502</code><br>  <code>127.0.0.1:7502&gt; SLAVEOF 127.0.0.1 7501</code></li>
<li><code>redis-cli -h 127.0.0.1 -p 7503</code><br>  <code>127.0.0.1:7503&gt; SLAVEOF 127.0.0.1 7501</code></li>
<li><code>redis-cli -h 127.0.0.1 -p 7504</code><br>  <code>127.0.0.1:7504&gt; SLAVEOF 127.0.0.1 7501</code></li>
</ul>
<p><strong> 以后台启动模式启动两个 sentinel（哨兵）</strong></p>
<p><code>redis-sentinel /usr/local/redis-7505/sentinel-7505.conf &amp;</code><br><code>redis-sentinel /usr/local/redis-7506/sentinel-7506.conf &amp;</code></p>
<h1 id="Done"><a href="#Done" class="headerlink" title="Done"></a>Done</h1><hr>

<h1 id="Redis-配置文件说明"><a href="#Redis-配置文件说明" class="headerlink" title="Redis 配置文件说明"></a>Redis 配置文件说明</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div></pre></td><td class="code"><pre><div class="line">################################## NETWORK #####################################</div><div class="line">bind 127.0.0.1			# 默认绑定本机所有ip地址 为了安全 可以只监听内网ip</div><div class="line">protected-mode yes		# 保护模式[无密码模式设置为no]</div><div class="line">port 6379 			# 默认端口</div><div class="line">tcp-backlog 511			# listen队列的长度</div><div class="line">timeout 0			# 客户端空闲多少s(秒)后踢掉 0禁止</div><div class="line">tcp-keepalive 300		# 检测挂掉的连接 单位s 0禁止</div><div class="line"></div><div class="line">################################# GENERAL #####################################</div><div class="line">daemonize no 			# 作为守护进程运行</div><div class="line">supervised no 			# 设成开机启动后 系统监控</div><div class="line">pidfile /var/run/redis_6379.pid # pid 位置</div><div class="line">loglevel notice 		# 设置服务端的日志级别，有下列几种选择</div><div class="line">				debug：记录详细信息，用于开发或调试</div><div class="line">				verbose：提供很多有用的信息，</div><div class="line">					但是又不像debug那么详尽，默认就是这一选项</div><div class="line">				notice：适度提醒，多用于产品环境</div><div class="line">				warning：仅显示重要的警告信息</div><div class="line"></div><div class="line">logfile &quot;&quot;			# 日志目录</div><div class="line">databases 16			# 指定数据库的数量</div><div class="line"></div><div class="line">################################ SNAPSHOTTING  ################################</div><div class="line">save 900 1			# 每900秒(15分钟)至少一次键值变更时被触发</div><div class="line">save 300 10			# 每300秒(5分钟)至少10次键值变更时被触发</div><div class="line">save 60 10000			# 每60秒至少10000次键值变更时被触发</div><div class="line">stop-writes-on-bgsave-error yes	# 后台存储错误停止写</div><div class="line">rdbcompression yes		# 存储至本地数据库时(持久化到rdb文件)是否压缩数据 默认为 yes</div><div class="line">rdbchecksum yes			# 读取和写入的时候是否支持CRC64校验 默认是开启的</div><div class="line">dbfilename dump.rdb 		# 镜像文件的名字</div><div class="line">dir ./ 				# 当前工作目录 配置文件和镜像文件等都在此目录下</div><div class="line"></div><div class="line">################################# REPLICATION #################################</div><div class="line">slave-serve-stale-data yes	# 当slave服务器和master服务器失去连接后，</div><div class="line">				或者当数据正在复制传输的时候，如果此参数值设置“yes”</div><div class="line">				slave服务器可以继续接受客户端的请求，</div><div class="line">				否则，会返回给请求的客户端如下信息</div><div class="line">				“SYNC with master in progress”</div><div class="line"></div><div class="line">slave-read-only yes		# 是否允许slave服务器节点只提供读服务</div><div class="line">repl-diskless-sync no 		# disk较慢，并且网络较快的时候，</div><div class="line">				可以用diskless。（默认用disk-based）</div><div class="line"></div><div class="line">repl-diskless-sync-delay 5	# 备份等待延迟时间 seconds</div><div class="line">repl-disable-tcp-nodelay no 	# 指定向slave同步数据时，是否禁用socket的NO_DELAY选 项。</div><div class="line">				若配置为“yes”，则禁用NO_DELAY，则TCP协议栈会合并小包统一发送，</div><div class="line">				这样可以减少主从节点间的包数量并节省带宽，但会增加数据同步到</div><div class="line">				slave的时间。若配置为“no”，表明启用NO_DELAY，则TCP协议栈不</div><div class="line">				会延迟小包的发送时机，这样数据同步的延时会减少，但需要更大的带宽。</div><div class="line">				通常情况下，应该配置为no以降低同步延时，</div><div class="line">				但在主从节点间网络负载已经很高的情况下，可以配置为yes</div><div class="line"></div><div class="line">slave-priority 100		# 指定slave的优先级。在不只1个slave存在的部署环境下，</div><div class="line">				当master宕机时，Redis Sentinel会将priority值最小的slave</div><div class="line">				提升为master需要注意的是，若该配置项为0，则对应的slave永远</div><div class="line">				不会自动提升为master</div><div class="line"></div><div class="line">############################## APPEND ONLY MODE ###############################</div><div class="line">appendonly no 			# 开启append only 模式之后，redis 会把所接收到的每一次写</div><div class="line">				操作请求都追加到appendonly.aof 文件中，当redis 重新启动时，</div><div class="line">				会从该文件恢复出之前的状态。但是这样会造成appendonly.aof </div><div class="line">				文件过大，所以redis 还支持了BGREWRITEAOF 指令，</div><div class="line">				对appendonly.aof 进行重新整理。默认是不开启的</div><div class="line"></div><div class="line">appendfilename &quot;appendonly.aof&quot;	# 默认为appendonly.aof</div><div class="line">appendfsync everysec		# 设置aof的同步频率，有三种选择</div><div class="line">				always、everysec、no，默认是everysec表示每秒同步一次</div><div class="line"></div><div class="line">no-appendfsync-on-rewrite no 	# 指定是否在后台aof文件rewrite期间调用fsync，</div><div class="line">				默认为no，表示要调用fsync（无论后台是否有子进程在刷盘）。</div><div class="line">				Redis在后台写RDB文件或重写afo文件期间会存在大量磁盘IO，</div><div class="line">				此时，在某些linux系统中，调用fsync可能会阻塞</div><div class="line"></div><div class="line">auto-aof-rewrite-percentage 100 # 指定Redis重写aof文件的条件，默认为100，</div><div class="line">				表示与上次rewrite的aof文件大小相比，当前aof文件增长量超过上</div><div class="line">				次afo文件大小的100%时，就会触发background rewrite。</div><div class="line">				若配置为0，则会禁用自动rewrite</div><div class="line"></div><div class="line">auto-aof-rewrite-min-size 64mb 	# 指定触发rewrite的aof文件大小。</div><div class="line">				若aof文件小于该值，即使当前文件的增量比例达到</div><div class="line">				auto-aof-rewrite-percentage的配置值，也不会触发自动</div><div class="line">				rewrite。即这两个配置项同时满足时，才会触发rewrite</div><div class="line"></div><div class="line">aof-load-truncated yes 		# 会自动发布一个log给客户端然后load（默认）</div><div class="line">				如果是no，用户必须手动redis-check-aof修复AOF文件才可以</div><div class="line"></div><div class="line">################################ LUA SCRIPTING  ###############################</div><div class="line">lua-time-limit 5000 		# 一个Lua脚本最长的执行时间，单位为毫秒</div><div class="line">				如果为0或负数表示无限执行时间，默认为5000</div><div class="line"></div><div class="line">################################## SLOW LOG ###################################</div><div class="line">slowlog-log-slower-than 10000 	# 设定执行时间，单位是微秒，执行时长超过该时间</div><div class="line">				的命令将会被记入log。-1表示不记录slow log; 0强制记录所有命令</div><div class="line"></div><div class="line">slowlog-max-len 128 		# 最多保存 128 条日志</div><div class="line"></div><div class="line">################################ LATENCY MONITOR ##############################</div><div class="line">latency-monitor-threshold 0	# 用LATENCY打印redis实例在跑命令时的耗时图表</div><div class="line">				只记录大于等于下边设置的值的操作。0的话，就是关闭监视。</div><div class="line">				可以动态开启</div><div class="line"></div><div class="line">############################# EVENT NOTIFICATION ##############################</div><div class="line">notify-keyspace-events &quot;&quot; 	# 如果开着开关。一个client进行了DEL操作在“foo”key</div><div class="line">				上在database0上。两个消息将会发布通过 </div><div class="line">				pub/sub默认所用的通知被禁用，因为用户通常不需要改特性</div><div class="line">				并且该特性会有性能损耗</div><div class="line"></div><div class="line">############################### ADVANCED CONFIG ###############################</div><div class="line">hash-max-ziplist-entries 512 	# hash类型的数据结构在编码上可以使用</div><div class="line">				ziplist和hashtable。ziplist的特点就是文件存储(以及内存存储)</div><div class="line">				所需的空间较小,在内容较小时,性能和hashtable几乎一样.因此redis</div><div class="line">				对hash类型默认采取ziplist。如果hash中条目的条目个数或者value</div><div class="line">				长度达到阀值,将会被重构为hashtable</div><div class="line">				这个参数指的是ziplist中允许存储的最大条目个数</div><div class="line">				默认为512，建议为128</div><div class="line"></div><div class="line">hash-max-ziplist-value 64	# ziplist中允许条目value值最大字节数，默认为64，建议为1024</div><div class="line">list-max-ziplist-size -2 	# 对于list类型,将会采取ziplist,linkedlist两种编码类型</div><div class="line">list-compress-depth 0		# 表示一个quicklist两端不被压缩的节点个数。</div><div class="line">				注：这里的节点个数是指quicklist双向链表的节点个数，</div><div class="line">				而不是指ziplist里面的数据项个数。实际上，一个</div><div class="line">				quicklist节点上的ziplist，如果被压缩，就是整体被压缩的</div><div class="line"></div><div class="line">				参数list-compress-depth的取值含义如下：</div><div class="line">				0: 是个特殊值，表示都不压缩。这是Redis的默认值。</div><div class="line">				1: 表示quicklist两端各有1个节点不压缩，中间的节点压缩。</div><div class="line">				2: 表示quicklist两端各有2个节点不压缩，中间的节点压缩。</div><div class="line">				3: 表示quicklist两端各有3个节点不压缩，中间的节点压缩。</div><div class="line">				依此类推</div><div class="line"></div><div class="line">				由于0是个特殊值，很容易看出quicklist的头节点和</div><div class="line">				尾节点总是不被压缩的，以便于在表的两端进行快速存取</div><div class="line"></div><div class="line">set-max-intset-entries 512 	# 当set类型中的数据都是数值类型，</div><div class="line">				并且set中整型元素的数量不超过指定值时，使用特殊的编码方式</div><div class="line"></div><div class="line">zset-max-ziplist-entries 128 	# 与hash和list类似 </div><div class="line">zset-max-ziplist-value 64 	# zsort也采用如下的配置来选择是否进行特殊编码来节省空间</div><div class="line">hll-sparse-max-bytes 3000 	# 这个限制包含了16个字节的头部，当一个HyperLogLog</div><div class="line">				使用sparse representation 超过了这个显示，它就会转换到</div><div class="line">				dense representation上</div><div class="line"></div><div class="line">activerehashing yes 		# 用来控制是否自动重建hash。Active rehashing每100微秒</div><div class="line">				使用1微秒cpu时间排序，以重组Redis的hash表。重建是通过一种</div><div class="line">				lazy方式，写入hash表的操作越多，需要执行rehashing的步骤</div><div class="line">				也越多，如果服务器当前空闲，那么rehashing操作会一直执行。</div><div class="line">				如果对实时性要求较高，难以接受redis时不时出现的2微秒的延迟，</div><div class="line">				则可以设置activerehashing为no，</div><div class="line">				否则建议设置为yes，以节省内存空间</div><div class="line"></div><div class="line">client-output-buffer-limit normal 0 0 0</div><div class="line">client-output-buffer-limit slave 256mb 64mb 60</div><div class="line">client-output-buffer-limit pubsub 32mb 8mb 60</div><div class="line">客户端buffer控制。在客户端与server进行的交互中,每个连接都会与一个buffer关联,</div><div class="line">此buffer用来队列化等待被client接受的响应信息。如果client不能及时的消费响应信息,</div><div class="line">那么buffer将会被不断积压而给server带来内存压力.如果buffer中积压的数据达到阀值,</div><div class="line">将会导致连接被关闭,buffer被移除。</div><div class="line">buffer控制类型包括:normal -&gt; 普通连接；slave -&gt;与slave之间的连接；</div><div class="line">pubsub -&gt;pub/sub类型连接，此类型的连接，往往会产生此种问题;</div><div class="line">因为pub端会密集的发布消息,但是sub端可能消费不足.</div><div class="line">指令格式:client-output-buffer-limit &lt;class&gt; &lt;hard&gt; &lt;soft&gt; &lt;seconds&gt;&quot;,</div><div class="line">其中hard表示buffer最大值,一旦达到阀值将立即关闭连接;</div><div class="line">soft表示&quot;容忍值&quot;,它和seconds配合,如果buffer值超过soft且持续时间达到了seconds,</div><div class="line">也将立即关闭连接,如果超过了soft但是在seconds之后，buffer数据小于了soft,连接将会被保留.</div><div class="line">其中hard和soft都设置为0,则表示禁用buffer控制.通常hard值大于soft</div><div class="line"></div><div class="line">hz 10  				# Redis server执行后台任务的频率,默认为10,</div><div class="line">				此值越大表示redis对&quot;间歇性task&quot;的执行次数越频繁(次数/秒)。</div><div class="line">				&quot;间歇性task&quot;包括&quot;过期集合&quot;检测、关闭&quot;空闲超时&quot;的连接等,此</div><div class="line">				值必须大于0且小于500。此值过小就意味着更多的cpu周期消耗,</div><div class="line">				后台task被轮询的次数更频繁。此值过大意味着&quot;内存敏感&quot;性较差。</div><div class="line">				建议采用默认值</div><div class="line"></div><div class="line">aof-rewrite-incremental-fsync yes # aof rewrite过程中,是否采取增量文件同步策略</div><div class="line">				默认为“yes”。 rewrite过程中,每32M数据进行一次文件同步</div><div class="line">				这样可以减少aof大文件写入对磁盘的操作次数</div></pre></td></tr></table></figure>
<p><br><br><code>Redis</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;下载&quot;&gt;&lt;a href=&quot;#下载&quot; class=&quot;headerlink&quot; title=&quot;下载&quot;&gt;&lt;/a&gt;下载&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;http://redis.io
&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&quot;解压-安装&quot;&gt;&lt;a href=&quot;#解压-安装&quot; c
    
    </summary>
    
    
      <category term="Redis" scheme="http://yoursite.com/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Linux 操作命令</title>
    <link href="http://yoursite.com/2016/10/14/019%20Linux%20%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/2016/10/14/019 Linux 操作命令/</id>
    <published>2016-10-14T00:00:00.000Z</published>
    <updated>2016-10-14T07:40:36.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="复制-剪切-粘贴"><a href="#复制-剪切-粘贴" class="headerlink" title="复制 剪切 粘贴"></a>复制 剪切 粘贴</h1><blockquote>
<p><strong>复制的命令是 <code>y</code> 即yank(提起) 常用的命令如下</strong><br>y     在使用v模式选定了某一块的时候，复制选定块到缓冲区用<br>yy     复制整行 (nyy或者yny ，复制n行，n为数字）<br>y^     复制当前到行头的内容<br>y$     复制当前到行尾的内容<br>yw     复制一个word (nyw或者ynw，复制n个word，n为数字）<br>yG     复制至档尾(nyG或者ynG，复制到第n行，例如1yG或者y1G，复制到档尾）<br><strong>剪切的命令是 <code>d</code> 即delete d与y命令基本类似 所以两个命令用法一样 包括含有数字的用法</strong><br>d     剪切选定块到缓冲区；<br>dd     剪切整行<br>d^     剪切至行首<br>d$     剪切至行尾<br>dw     剪切一个word<br>dG     剪切至档尾<br><strong>粘贴的命令式 <code>p</code> 即put(放下）</strong><br>p     小写p代表贴至游标后（下）, 因为游标是在具体字符的位置上, 所以实际是在该字符的后面<br>P     大写P代表贴至游标前（上）整行的复制粘贴在游标的上（下）一行，非整行的复制则是粘贴在游标的前（后）<br>    注：<br>    在正则表达式中，^表示匹配字符串的开始位置，$表示匹配字符串的结束位置。<br>    命令前面加数字表示重复的次数，加字母表示使用的缓冲区名称。使用英文句号”.”可以重复上一个命令。<br>    在复制粘贴时，另一组常用的命令是u（撤销操作），U（撤销某一行最近所有修改），Ctrl+R（重做），<br>    这些功能主要是vim中的，vi中略有差别</p>
</blockquote>
<h1 id="yum-y-update-upgrade"><a href="#yum-y-update-upgrade" class="headerlink" title="yum -y update / upgrade"></a>yum -y update / upgrade</h1><blockquote>
<p><strong>yum -y upgrade 和 yum -y update 区别 </strong><br>yum -y update<br>升级所有包，改变软件设置和系统设置,系统版本内核都升级<br>yum -y upgrade<br>升级所有包，不改变软件设置和系统设置，系统版本升级，内核不改变</p>
</blockquote>
<h1 id="修改-文件-文件夹-名称"><a href="#修改-文件-文件夹-名称" class="headerlink" title="修改 文件 文件夹 名称"></a>修改 文件 文件夹 名称</h1><blockquote>
<p><code>mv</code> 修改前的文件名称 修改后的文件名称<br><code>mv</code> 修改前的文件夹名称 修改后的文件夹名称</p>
</blockquote>
<p><br><br><code>Linux</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;复制-剪切-粘贴&quot;&gt;&lt;a href=&quot;#复制-剪切-粘贴&quot; class=&quot;headerlink&quot; title=&quot;复制 剪切 粘贴&quot;&gt;&lt;/a&gt;复制 剪切 粘贴&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;复制的命令是 &lt;code&gt;y&lt;/code&gt; 即ya
    
    </summary>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Linux 中 curl</title>
    <link href="http://yoursite.com/2016/10/11/018%20Linux%20%E4%B8%AD%20curl/"/>
    <id>http://yoursite.com/2016/10/11/018 Linux 中 curl/</id>
    <published>2016-10-11T00:00:00.000Z</published>
    <updated>2016-10-14T08:05:02.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>curl是利用URL语法在命令行方式下工作的开源文件传输工具。它被广泛应用在Unix、多种Linux发行版中，并且有DOS和Win32、Win64下的移植版本<br>Ubuntu 中默认没有安装：<code>apt-get install curl</code> 安装即可</p>
</blockquote>
<h1 id="常见参数"><a href="#常见参数" class="headerlink" title="常见参数"></a>常见参数</h1><table>
<thead>
<tr>
<th style="text-align:left">[option]</th>
<th style="text-align:left">[URL…]</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">-A/–user-agent <string></string></td>
<td style="text-align:left">设置用户代理发送给服务器</td>
</tr>
<tr>
<td style="text-align:left">-b/–cookie <name=string file=""></name=string></td>
<td style="text-align:left">cookie字符串或文件读取位置</td>
</tr>
<tr>
<td style="text-align:left">-c/–cookie-jar <file></file></td>
<td style="text-align:left">操作结束后把cookie写入到这个文件中</td>
</tr>
<tr>
<td style="text-align:left">-C/–continue-at <offset></offset></td>
<td style="text-align:left">断点续转</td>
</tr>
<tr>
<td style="text-align:left">-D/–dump-header <file></file></td>
<td style="text-align:left">把header信息写入到该文件中</td>
</tr>
<tr>
<td style="text-align:left">-e/–referer</td>
<td style="text-align:left">来源网址</td>
</tr>
<tr>
<td style="text-align:left">-f/–fail</td>
<td style="text-align:left">连接失败时不显示http错误</td>
</tr>
<tr>
<td style="text-align:left">-o/–output</td>
<td style="text-align:left">把输出写到该文件中</td>
</tr>
<tr>
<td style="text-align:left">-O/–remote-name</td>
<td style="text-align:left">把输出写到该文件中，保留远程文件的文件名</td>
</tr>
<tr>
<td style="text-align:left">-r/–range <range></range></td>
<td style="text-align:left">检索来自HTTP/1.1或FTP服务器字节范围</td>
</tr>
<tr>
<td style="text-align:left">-s/–silent</td>
<td style="text-align:left">静音模式。不输出任何东西</td>
</tr>
<tr>
<td style="text-align:left">-T/–upload-file <file></file></td>
<td style="text-align:left">上传文件</td>
</tr>
<tr>
<td style="text-align:left">-u/–user <user[:password]></user[:password]></td>
<td style="text-align:left">设置服务器的用户和密码</td>
</tr>
<tr>
<td style="text-align:left">-w/–write-out [format]</td>
<td style="text-align:left">什么输出完成后</td>
</tr>
<tr>
<td style="text-align:left">-x/–proxy <host[:port]></host[:port]></td>
<td style="text-align:left">在给定的端口上使用HTTP代理</td>
</tr>
<tr>
<td style="text-align:left">-#/–progress-bar</td>
<td style="text-align:left">进度条显示当前的传送状态</td>
</tr>
</tbody>
</table>
<h1 id="常用-curl-实例"><a href="#常用-curl-实例" class="headerlink" title="常用 curl 实例"></a>常用 curl 实例</h1><p><strong> 发送 GET 请求 </strong></p>
<pre><code># curl http://www.baidu.com

# curl http://www.baidu.com/login?param1=12345\&amp;param2=6789  多个参数要加 \ 转义

# curl -i http://www.baidu.com  显示全部信息

# curl -l http://www.baidu.com  只显示头部信息

# curl -v http://www.baidu.com  显示get请求全过程解析
</code></pre><p><strong> 发送 POST 请求 </strong></p>
<pre><code># curl -d &quot;param1=12345&amp;param2=6789&quot; http://www.baidu.com
</code></pre><p><strong> 抓取页面内容到一个文件中 选项 -o 将下载数据写入到指定名称的文件中，并使用 –progress 显示进度条 </strong></p>
<pre><code># curl -o l-zm.html http://www.l-zm.com --progress
</code></pre><p><strong> 使用选项 -O URL必须具体到文件 不然抓不下来 </strong></p>
<pre><code># curl -O http://www.baidu.com/lim.jpg --progress

# curl -O http://www.baidu.com/lim01.jpg -O http://www.baidu.com/lim02.jpg  获取多个
</code></pre><p><br><br><code>Linux</code> <code>curl</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;curl是利用URL语法在命令行方式下工作的开源文件传输工具。它被广泛应用在Unix、多种Linux发行版中，并且有DOS和Win32、Win64下的移植版本&lt;br&gt;Ubuntu 中默认没有安装：&lt;code&gt;apt-get install curl
    
    </summary>
    
    
      <category term="Linux" scheme="http://yoursite.com/tags/Linux/"/>
    
      <category term="curl" scheme="http://yoursite.com/tags/curl/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6 计划任务 CronTab</title>
    <link href="http://yoursite.com/2016/10/04/017%20CentOS%206%20%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%20CronTab/"/>
    <id>http://yoursite.com/2016/10/04/017 CentOS 6 计划任务 CronTab/</id>
    <published>2016-10-04T00:00:00.000Z</published>
    <updated>2016-10-13T14:07:41.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装-CronTab"><a href="#安装-CronTab" class="headerlink" title="安装 CronTab"></a>安装 CronTab</h1><p><strong> CentOS 中自带了CronTab 如果有需要 百度一下，你就知道 </strong></p>
<h1 id="CronTab-使用与解释"><a href="#CronTab-使用与解释" class="headerlink" title="CronTab 使用与解释"></a>CronTab 使用与解释</h1><p><code>crontab -l</code> 查看所有的计划任务<br><code>crontab -e</code> 修改计划任务</p>
<p><code>service crond start</code> 启动计划任务<br><code>service crond restart</code> 重启计划任务<br><code>service crond reload</code> 重新载入计划任务</p>
<p><strong> Ubuntu 下的使用的语法</strong><br><code>service cron start</code> 启动计划任务<br><code>service cron restart</code> 重启计划任务<br><code>service cron reload</code> 重新载入计划任务</p>
<pre><code>如果第一次用这个命令会让你选择文本编辑器, 我选择的是`vim`
如果要换: `select-editor`
</code></pre><blockquote>
<p><strong>CronTab 的语法</strong><br>* * * * * date &gt;&gt; /tmp/date.txt</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">*</th>
<th style="text-align:center">*</th>
<th style="text-align:center">*</th>
<th style="text-align:center">*</th>
<th style="text-align:center">*</th>
<th style="text-align:center">date &gt;&gt; /tmp/date.txt</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">分钟</td>
<td style="text-align:center">小时</td>
<td style="text-align:center">几号</td>
<td style="text-align:center">几月</td>
<td style="text-align:center">星期</td>
<td style="text-align:center">需要执行的命令</td>
</tr>
</tbody>
</table>
<h1 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h1><h2 id="每一小时"><a href="#每一小时" class="headerlink" title="每一小时"></a>每一小时</h2><pre><code>* */1 * * * /service/l-zm/request.sh
</code></pre><h2 id="每小时执行-etc-cron-hourly目录内的脚本"><a href="#每小时执行-etc-cron-hourly目录内的脚本" class="headerlink" title="每小时执行/etc/cron.hourly目录内的脚本"></a>每小时执行/etc/cron.hourly目录内的脚本</h2><pre><code>01 * * * * root run-parts /etc/cron.hourly
</code></pre><h2 id="每秒执行一次"><a href="#每秒执行一次" class="headerlink" title="每秒执行一次"></a>每秒执行一次</h2><pre><code>*/1 * * * * sleep 0s;date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 1s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 2s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 3s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 4s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 5s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 6s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 7s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 8s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 9s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 10s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 11s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 12s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 13s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 14s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 15s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 16s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 17s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 18s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 19s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 20s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 21s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 22s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 23s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 24s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 25s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 26s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 27s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 28s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 29s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 30s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 31s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 32s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 33s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 34s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 35s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 36s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 37s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 38s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 39s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 40s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 41s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 42s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 43s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 44s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 45s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 46s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 47s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 48s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 49s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 50s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 51s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 52s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 53s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 54s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 55s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 56s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 57s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 58s; date &gt;&gt; /tmp/date.txt
*/1 * * * * sleep 59s; date &gt;&gt; /tmp/date.txt

如果每秒没有循环连续 可以试试把 sleep 0s 删除, 在最后添加 sleep 60s (CentOS 和 Ubuntu 下不一样)
</code></pre><h2 id="每小时的第3和第15分钟执行"><a href="#每小时的第3和第15分钟执行" class="headerlink" title="每小时的第3和第15分钟执行"></a>每小时的第3和第15分钟执行</h2><pre><code>3,15 * * * * /service/l-zm/request.sh
</code></pre><h2 id="在上午8点到11点的第3和第15分钟执行"><a href="#在上午8点到11点的第3和第15分钟执行" class="headerlink" title="在上午8点到11点的第3和第15分钟执行"></a>在上午8点到11点的第3和第15分钟执行</h2><pre><code>3,15 8-11 * * * /service/l-zm/request.sh
</code></pre><h2 id="每隔两天的上午8点到11点的第3和第15分钟执行"><a href="#每隔两天的上午8点到11点的第3和第15分钟执行" class="headerlink" title="每隔两天的上午8点到11点的第3和第15分钟执行"></a>每隔两天的上午8点到11点的第3和第15分钟执行</h2><pre><code>3,15 8-11 */2 * * date &gt;&gt; /tmp/date.txt
</code></pre><h2 id="每个星期一的上午8点到11点的第3和第15分钟执行"><a href="#每个星期一的上午8点到11点的第3和第15分钟执行" class="headerlink" title="每个星期一的上午8点到11点的第3和第15分钟执行"></a>每个星期一的上午8点到11点的第3和第15分钟执行</h2><pre><code>3,15 8-11 * * 1 date &gt;&gt; /tmp/date.txt
</code></pre><h2 id="每晚的21-30"><a href="#每晚的21-30" class="headerlink" title="每晚的21:30"></a>每晚的21:30</h2><pre><code>30 21 * * * /service/l-zm/request.sh
</code></pre><h2 id="每月1、10、22日的4-45"><a href="#每月1、10、22日的4-45" class="headerlink" title="每月1、10、22日的4 : 45"></a>每月1、10、22日的4 : 45</h2><pre><code>45 4 1,10,22 * * /service/l-zm/request.sh
</code></pre><h2 id="每周六、周日的1-10"><a href="#每周六、周日的1-10" class="headerlink" title="每周六、周日的1 : 10"></a>每周六、周日的1 : 10</h2><pre><code>10 1 * * 6,0 /service/l-zm/request.sh
</code></pre><h2 id="每天18-00至23-00之间每隔30分钟"><a href="#每天18-00至23-00之间每隔30分钟" class="headerlink" title="每天18 : 00至23 : 00之间每隔30分钟"></a>每天18 : 00至23 : 00之间每隔30分钟</h2><pre><code>0,30 18-23 * * * /service/l-zm/request.sh
</code></pre><h2 id="每星期六的晚上11-00-pm"><a href="#每星期六的晚上11-00-pm" class="headerlink" title="每星期六的晚上11 : 00 pm"></a>每星期六的晚上11 : 00 pm</h2><pre><code>0 23 * * 6 /service/l-zm/request.sh
</code></pre><h2 id="晚上11点到早上7点之间，每隔一小时"><a href="#晚上11点到早上7点之间，每隔一小时" class="headerlink" title="晚上11点到早上7点之间，每隔一小时"></a>晚上11点到早上7点之间，每隔一小时</h2><pre><code>* 23-7/1 * * * /service/l-zm/request.sh
</code></pre><h2 id="每月的4号与每周一到周三的11点"><a href="#每月的4号与每周一到周三的11点" class="headerlink" title="每月的4号与每周一到周三的11点"></a>每月的4号与每周一到周三的11点</h2><pre><code>0 11 4 * mon-wed /service/l-zm/request.sh
</code></pre><h2 id="一月一号的4点"><a href="#一月一号的4点" class="headerlink" title="一月一号的4点"></a>一月一号的4点</h2><pre><code>0 4 1 jan * /service/l-zm/request.sh
</code></pre><p><br><br><code>CentOS</code> <code>CronTab</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装-CronTab&quot;&gt;&lt;a href=&quot;#安装-CronTab&quot; class=&quot;headerlink&quot; title=&quot;安装 CronTab&quot;&gt;&lt;/a&gt;安装 CronTab&lt;/h1&gt;&lt;p&gt;&lt;strong&gt; CentOS 中自带了CronTab 如果有需要 百度一下
    
    </summary>
    
    
      <category term="CentOS" scheme="http://yoursite.com/tags/CentOS/"/>
    
      <category term="CronTab" scheme="http://yoursite.com/tags/CronTab/"/>
    
  </entry>
  
  <entry>
    <title>Tomcat 相关问题及各个版本下载</title>
    <link href="http://yoursite.com/2016/10/03/015%20Tomcat%20%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E5%8F%8A%E5%90%84%E4%B8%AA%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD/"/>
    <id>http://yoursite.com/2016/10/03/015 Tomcat 相关问题及各个版本下载/</id>
    <published>2016-10-03T00:00:00.000Z</published>
    <updated>2016-10-14T08:04:49.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Tomcat-Get-请求中文乱码"><a href="#Tomcat-Get-请求中文乱码" class="headerlink" title="Tomcat Get 请求中文乱码"></a>Tomcat Get 请求中文乱码</h1><p>到 Tmocat 目录 conf 下修改 server.xml 添加 <code>URIEncoding=&quot;UTF-8&quot;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Connector URIEncoding=&quot;UTF-8&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot;/&gt;</div></pre></td></tr></table></figure>
<h1 id="Tomcat-各个版本下载"><a href="#Tomcat-各个版本下载" class="headerlink" title="Tomcat 各个版本下载"></a>Tomcat 各个版本下载</h1><p><a href="http://archive.apache.org/dist/tomcat/" target="_blank" rel="external">http://archive.apache.org/dist/tomcat/</a></p>
<pre><code>http://archive.apache.org/dist/tomcat/
</code></pre><p><br><br><code>Tomcat</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Tomcat-Get-请求中文乱码&quot;&gt;&lt;a href=&quot;#Tomcat-Get-请求中文乱码&quot; class=&quot;headerlink&quot; title=&quot;Tomcat Get 请求中文乱码&quot;&gt;&lt;/a&gt;Tomcat Get 请求中文乱码&lt;/h1&gt;&lt;p&gt;到 Tmocat 目
    
    </summary>
    
    
      <category term="Tomcat" scheme="http://yoursite.com/tags/Tomcat/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6 安装 JDK</title>
    <link href="http://yoursite.com/2016/10/03/016%20CentOS%206%20%E5%AE%89%E8%A3%85JDK/"/>
    <id>http://yoursite.com/2016/10/03/016 CentOS 6 安装JDK/</id>
    <published>2016-10-03T00:00:00.000Z</published>
    <updated>2016-10-20T08:21:47.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载-JDK-安装"><a href="#下载-JDK-安装" class="headerlink" title="下载 JDK 安装"></a>下载 JDK 安装</h1><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
<blockquote>
<p><strong>其他版本下载提示</strong><br>页面拉低，找到 Java Archive </p>
</blockquote>
<p><strong> 上传至服务器 </strong></p>
<p><code>tar -zxvf jdk-7u80-linux-x64.tar.gz</code></p>
<p><code>mv jdk1.7.0_80 /usr/</code></p>
<p><strong> 设置环境变量 </strong></p>
<p><code>vim /etc/profile</code></p>
<p><strong> 添加如下内容 </strong></p>
<pre><code>export JAVA_HOME=/usr/jdk1.7.0_80
export JRE_HOME=$JAVA_HOME/jre
export PATH=$PATH:$JAVA_HOME/bin
export CLASSPATH=./:$JAVA_HOME/lib:$JAVA_HOME/jre/lib
</code></pre><p><strong> 修改生效 </strong><br><code>source /etc/profile</code></p>
<p><strong> 验证 </strong><br><code>java -version</code></p>
<pre><code>java version &quot;1.7.0_80&quot;
Java(TM) SE Runtime Environment (build 1.7.0_80-b15)
Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)
</code></pre><h1 id="使用-yum-安装-JDK"><a href="#使用-yum-安装-JDK" class="headerlink" title="使用 yum 安装 JDK"></a>使用 yum 安装 JDK</h1><p><code>yum search java | grep jdk</code></p>
<pre><code>ldapjdk-javadoc.x86_64 : Javadoc for ldapjdk
java-1.6.0-openjdk.x86_64 : OpenJDK Runtime Environment
java-1.6.0-openjdk-demo.x86_64 : OpenJDK Demos
java-1.6.0-openjdk-devel.x86_64 : OpenJDK Development Environment
java-1.6.0-openjdk-javadoc.x86_64 : OpenJDK API Documentation
java-1.6.0-openjdk-src.x86_64 : OpenJDK Source Bundle
java-1.7.0-openjdk.x86_64 : OpenJDK Runtime Environment
java-1.7.0-openjdk-demo.x86_64 : OpenJDK Demos
java-1.7.0-openjdk-devel.x86_64 : OpenJDK Development Environment
java-1.7.0-openjdk-javadoc.noarch : OpenJDK API Documentation
java-1.7.0-openjdk-src.x86_64 : OpenJDK Source Bundle
java-1.8.0-openjdk.x86_64 : OpenJDK Runtime Environment
java-1.8.0-openjdk-debug.x86_64 : OpenJDK Runtime Environment with full debug on
java-1.8.0-openjdk-demo.x86_64 : OpenJDK Demos
java-1.8.0-openjdk-demo-debug.x86_64 : OpenJDK Demos with full debug on
java-1.8.0-openjdk-devel.x86_64 : OpenJDK Development Environment
java-1.8.0-openjdk-devel-debug.x86_64 : OpenJDK Development Environment with
java-1.8.0-openjdk-headless.x86_64 : OpenJDK Runtime Environment
java-1.8.0-openjdk-headless-debug.x86_64 : OpenJDK Runtime Environment with full
java-1.8.0-openjdk-javadoc.noarch : OpenJDK API Documentation
java-1.8.0-openjdk-javadoc-debug.noarch : OpenJDK API Documentation for packages
java-1.8.0-openjdk-src.x86_64 : OpenJDK Source Bundle
java-1.8.0-openjdk-src-debug.x86_64 : OpenJDK Source Bundle for packages with
ldapjdk.x86_64 : The Mozilla LDAP Java SDK
</code></pre><p><strong> 安装 java-1.7.0-openjdk </strong></p>
<p><code>yum install java-1.7.0-openjdk</code></p>
<pre><code>安装完之后，默认的安装目录是在: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.75.x86_64
</code></pre><p><strong> 设置环境变量 修改生效 </strong></p>
<pre><code>同上
</code></pre><p><br><br><code>JDK</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;下载-JDK-安装&quot;&gt;&lt;a href=&quot;#下载-JDK-安装&quot; class=&quot;headerlink&quot; title=&quot;下载 JDK 安装&quot;&gt;&lt;/a&gt;下载 JDK 安装&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;http://www.oracle.com/technetwork
    
    </summary>
    
    
      <category term="JDK" scheme="http://yoursite.com/tags/JDK/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6 安装 / 更新 GCC 编译器</title>
    <link href="http://yoursite.com/2016/10/01/014%20CentOS%206%20%E5%AE%89%E8%A3%85:%E6%9B%B4%E6%96%B0%20gcc%20%E7%BC%96%E8%AF%91%E5%99%A8/"/>
    <id>http://yoursite.com/2016/10/01/014 CentOS 6 安装:更新 gcc 编译器/</id>
    <published>2016-10-01T00:00:00.000Z</published>
    <updated>2016-10-02T16:00:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="使用-yum-安装-gcc"><a href="#使用-yum-安装-gcc" class="headerlink" title="使用 yum 安装 gcc"></a>使用 yum 安装 gcc</h1><p><strong> 安装 gcc  、 c++ 编译器以及内核文件 </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install gcc gcc-c++ kernel-devel</div></pre></td></tr></table></figure>
<h1 id="yum-安装的版本太低-就需要自己安装了"><a href="#yum-安装的版本太低-就需要自己安装了" class="headerlink" title="yum 安装的版本太低 就需要自己安装了"></a>yum 安装的版本太低 就需要自己安装了</h1><blockquote>
<p>不建议在服务器上面下载 因为速度太慢了 下面这个网址 根据自己的需求下载指定版本 然后上传至服务器<br><code>http://gcc.skazkaforyou.com/releases/</code></p>
</blockquote>
<h1 id="下载-解压"><a href="#下载-解压" class="headerlink" title="下载 解压"></a>下载 解压</h1><p>在这里，我们将<code>gcc-4.9.1.tar.gz</code>解压到<code>/usr/local/src</code>目录中(当然你也可以指定其他目录)</p>
<p>解压 <code>tar -xvzf gcc-4.9.1.tar.gz</code> <code>cd gcc-4.9.1</code></p>
<h1 id="运行-download-prerequisites-脚本"><a href="#运行-download-prerequisites-脚本" class="headerlink" title="运行 download_prerequisites 脚本"></a>运行 download_prerequisites 脚本</h1><p><code>./contrib/download_prerequisites</code></p>
<blockquote>
<p>安装gcc需要下载诸如gmp、mpfr、mpc等依赖文件，执行download_prerequisites将会自动下载这些软件并解压到当前目录(文件不大，总共只有几MB，请耐心等待下载)</p>
</blockquote>
<h1 id="gcc-安装位置"><a href="#gcc-安装位置" class="headerlink" title="gcc 安装位置"></a>gcc 安装位置</h1><p>接着，就可以对gcc进行编译安装了。在此之前，我们先创建一个目录 <code>/usr/local/build/gcc-4.9.1</code> (你也可以自行指定其他目录)用于存放编译后的程序文件</p>
<p><code>mkdir /usr/local/build/</code></p>
<p><code>mkdir /usr/local/build/gcc-4.9.1</code></p>
<p>跳转到编译后的程序文件存放目录<br><code>cd /usr/local/build/gcc-4.9.1</code><br>调用gcc源程序的configure(后面的参数选项可根据需要自行修改)，用于配置gcc<br><code>/usr/local/src/gcc-4.9.1/configure --enable-checking=release --enable-languages=c,c++ --disable-multilib</code><br>充分发挥CPU四核优势，启动四线程<br><code>make -j4</code></p>
<h1 id="编译-gcc-源程序-需要消耗比较长的时间"><a href="#编译-gcc-源程序-需要消耗比较长的时间" class="headerlink" title="编译 gcc 源程序 需要消耗比较长的时间"></a>编译 gcc 源程序 需要消耗比较长的时间</h1><p><code>make</code></p>
<blockquote>
<p><code>make</code>命令这一过程耗费的时间非常多 我大概用了一个小时</p>
</blockquote>
<h1 id="安装-gcc"><a href="#安装-gcc" class="headerlink" title="安装 gcc"></a>安装 gcc</h1><p><code>make insatall</code></p>
<h1 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h1><p><strong>查看 gcc 版本</strong></p>
<p><code>gcc -v</code> <strong>gcc version 4.9.1 (GCC) </strong></p>
<p><br><br><code>CentOS</code> <code>GCC</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;使用-yum-安装-gcc&quot;&gt;&lt;a href=&quot;#使用-yum-安装-gcc&quot; class=&quot;headerlink&quot; title=&quot;使用 yum 安装 gcc&quot;&gt;&lt;/a&gt;使用 yum 安装 gcc&lt;/h1&gt;&lt;p&gt;&lt;strong&gt; 安装 gcc  、 c++ 编译器
    
    </summary>
    
    
      <category term="CentOS" scheme="http://yoursite.com/tags/CentOS/"/>
    
      <category term="GCC" scheme="http://yoursite.com/tags/GCC/"/>
    
  </entry>
  
  <entry>
    <title>Centos 6 中部署 Hexo 个人博客</title>
    <link href="http://yoursite.com/2016/10/01/013%20CentOS%206%20%E4%B8%AD%E9%83%A8%E7%BD%B2%20Hexo%20%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://yoursite.com/2016/10/01/013 CentOS 6 中部署 Hexo 个人博客/</id>
    <published>2016-10-01T00:00:00.000Z</published>
    <updated>2016-10-02T16:02:52.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="首先安装-Node-js"><a href="#首先安装-Node-js" class="headerlink" title="首先安装 Node.js"></a>首先安装 Node.js</h1><h2 id="更新系统所有软件"><a href="#更新系统所有软件" class="headerlink" title="更新系统所有软件"></a>更新系统所有软件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y update</div></pre></td></tr></table></figure>
<h2 id="安装-Development-Tools"><a href="#安装-Development-Tools" class="headerlink" title="安装 Development Tools"></a>安装 Development Tools</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y groupinstall &quot;Development Tools&quot;</div></pre></td></tr></table></figure>
<h2 id="安装-screen"><a href="#安装-screen" class="headerlink" title="安装 screen"></a>安装 screen</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install screen</div></pre></td></tr></table></figure>
<h2 id="选择目录来编译源程序"><a href="#选择目录来编译源程序" class="headerlink" title="选择目录来编译源程序"></a>选择目录来编译源程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/src</div></pre></td></tr></table></figure>
<h2 id="下载-Node-js"><a href="#下载-Node-js" class="headerlink" title="下载 Node.js"></a>下载 Node.js</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://nodejs.org/dist/node-latest.tar.gz</div></pre></td></tr></table></figure>
<h2 id="解压并变为目录"><a href="#解压并变为目录" class="headerlink" title="解压并变为目录"></a>解压并变为目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tar zxf node-*.tar.gz</div><div class="line">cd node-v*</div></pre></td></tr></table></figure>
<h2 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./configure</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>出现问题</strong><br>WARNING: C++ compiler too old, need g++ 4.8 or clang++ 3.4 (CXX=g++)<br>gcc 版本过低，升级gcc。请看我博客中 <b>CentOS 6 安装 / 更新 GCC 编译器</b></p>
</blockquote>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>出现问题</strong><br>make[1]: [/usr/local/src/node-v6.7.0/out/Release/obj.target/v8_libplatform/deps/v8/src/libplatform/default-platform.o] 错误 1<br>make[1]: Leaving directory /usr/local/src/node-v6.7.0/out<br>make: <em>*</em> [node] 错误 2<br><br><br>源码编译升级安装了gcc后，编译程序或运行其它程序时，有时会出现类似/usr/lib64/libstdc++.so.6: version GLIBCXX_3.4.21 not found的问题。这是因为升级gcc时，生成的动态库没有替换老版本gcc的动态库导致的，将gcc最新版本的动态库替换系统中老版本的动态库即可解决<br><code>strings /usr/lib64/libstdc++.so.6 | grep GLIBC</code><br>输出结果如下<br>……<br>GLIBCXX_3.4.17<br>GLIBCXX_3.4.18<br>GLIBCXX_3.4.19<br>GLIBC_2.3<br>GLIBC_2.2.5<br>GLIBC_2.3.2<br>……<br>从以上输出可以看出，gcc的动态库还是旧版本的。说明出现这些问题，是因为升级gcc时，生成的动态库没有替换老版本gcc的动态库<br>问题处理：执行以下命令，查找编译gcc时生成的最新动态库<br><code>find / -name &quot;libstdc++.so星&quot;</code><br>……<br>/usr/local/build/gcc-4.9.1/x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.20<br>/usr/local/build/gcc-4.9.1/x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so<br>/usr/local/build/gcc-4.9.1/x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6<br>/usr/local/build/gcc-4.9.1/stage1-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.20<br>(最新动态库)<br>/usr/local/build/gcc-4.9.1/stage1-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so<br>/usr/local/build/gcc-4.9.1/stage1-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6<br>/usr/local/build/gcc-4.9.1/prev-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.20<br>/usr/local/build/gcc-4.9.1/prev-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so<br>/usr/local/build/gcc-4.9.1/prev-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6<br>将上面的最新动态库libstdc++.so.6.0.20复制到/usr/lib64目录下<br><code>cp /usr/local/build/gcc-4.9.1/stage1-x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.20 /usr/lib64</code><br>复制后，修改系统默认动态库的指向，即：重建默认库的软连接<br>切换工作目录至 <code>cd /usr/lib64</code><br>删除原来软连接 <code>rm -rf libstdc++.so.6</code><br>将默认库的软连接指向最新动态库 <code>ln -s libstdc++.so.6.0.20 libstdc++.so.6</code><br>默认动态库升级完成。重新运行以下命令检查动态库 <code>strings /usr/lib64/libstdc++.so.6 | grep GLIBC</code><br>有了 <code>GLIBCXX_3.4.20</code><br>重新编译 <code>make</code></p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make install</div></pre></td></tr></table></figure>
<h2 id="Node-js-安装完成"><a href="#Node-js-安装完成" class="headerlink" title="Node.js 安装完成"></a>Node.js 安装完成</h2><p><strong> 查看Node.js 版本 </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node --version</div></pre></td></tr></table></figure>
<h2 id="安装-Nginx"><a href="#安装-Nginx" class="headerlink" title="安装 Nginx"></a>安装 Nginx</h2><p><strong> 这里不多说，网上都是 </strong></p>
<h1 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g hexo</div></pre></td></tr></table></figure>
<h1 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h1><p><strong> 可以到自己指定的目录下初始化，比如我的在 <code>/service/hexo</code> 下 </strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hexo init</div></pre></td></tr></table></figure>
<h1 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h1><p><strong> 将自己的 MarkDown 文件上传至服务器 Hexo source 指定文件夹下 </strong></p>
<p><code>hexo g</code></p>
<p><code>hexo s &amp;</code> (添加 &amp; 后，关掉terminal后服务依然在)</p>
<p><code>ps aux | grep hexo</code> (找到指定的端口号可以使用：<code>kill -9 123456</code> 杀掉服务)</p>
<h1 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h1><p><br><br><code>服务器</code> <code>Node.js</code> <code>Hexo</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;首先安装-Node-js&quot;&gt;&lt;a href=&quot;#首先安装-Node-js&quot; class=&quot;headerlink&quot; title=&quot;首先安装 Node.js&quot;&gt;&lt;/a&gt;首先安装 Node.js&lt;/h1&gt;&lt;h2 id=&quot;更新系统所有软件&quot;&gt;&lt;a href=&quot;#更新系统所
    
    </summary>
    
    
      <category term="服务器" scheme="http://yoursite.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="Node.js" scheme="http://yoursite.com/tags/Node-js/"/>
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Mac 电脑下终端程序 SecureCRT</title>
    <link href="http://yoursite.com/2016/09/29/012%20Mac%20%E7%94%B5%E8%84%91%E4%B8%8B%E7%BB%88%E7%AB%AF%E7%A8%8B%E5%BA%8F%20SecureCRT/"/>
    <id>http://yoursite.com/2016/09/29/012 Mac 电脑下终端程序 SecureCRT/</id>
    <published>2016-09-29T00:00:00.000Z</published>
    <updated>2016-09-28T12:55:05.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="不能记录密码"><a href="#不能记录密码" class="headerlink" title="不能记录密码"></a>不能记录密码</h1><p>打开 SecureCRT 的全局选项，在主菜单 <code>Preferences</code>-&gt;<code>General</code> -&gt; 取消 <code>Use Keychain</code></p>
<h1 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h1><p>连接一个回话，在菜单中找到 <code>Options</code>-&gt;<code>Session Options</code>-&gt;<code>Appearance</code> (如果显示中文有问题也在这里设置)</p>
<hr>
<p><strong>CRACK STEP</strong></p>
<ul>
<li>打开dmg镜像，将 <code>SecureCRT.app</code> 拖入应用程序</li>
<li>打开一次应用程序中的 <code>SecureCRT.app</code>-&gt;<code>I Agree</code> 后退出 必须要做！</li>
<li>到应用程序里先找到secureCRT的包内容，进入MACOS文件夹。替换crack中的secureCRT文件</li>
<li>打开软件，到 <code>Help</code> 中点击 <code>Enter License Data</code>-&gt;<code>Continue</code>-&gt;<code>Enter License Manually</code></li>
<li>对应Crack文件夹中的 <code>Readme!!</code> 文档填入相应信息即可</li>
</ul>
<p><br><br><code>Mac</code> <code>软件</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;不能记录密码&quot;&gt;&lt;a href=&quot;#不能记录密码&quot; class=&quot;headerlink&quot; title=&quot;不能记录密码&quot;&gt;&lt;/a&gt;不能记录密码&lt;/h1&gt;&lt;p&gt;打开 SecureCRT 的全局选项，在主菜单 &lt;code&gt;Preferences&lt;/code&gt;-&amp;gt;&lt;
    
    </summary>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
      <category term="软件" scheme="http://yoursite.com/tags/%E8%BD%AF%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>Nginx 负载均衡</title>
    <link href="http://yoursite.com/2016/09/28/011%20Nginx%20%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    <id>http://yoursite.com/2016/09/28/011 Nginx 负载均衡/</id>
    <published>2016-09-28T00:00:00.000Z</published>
    <updated>2016-09-27T17:46:47.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>一般情况下，项目上线可能会选在凌晨时刻进行，比如之前在中国电信，项目上线要等到凌晨一点，由测试给出最终版本项目文件，然后等待运维部署上线，我们开发等待测试给出上线结果，如果有问题，马上做修改，因为此刻访问用户最少，影响微乎其微。但是，上线完成，已经六点了。</p>
<blockquote>
<p><strong>生产环境   </strong>是一个神圣而有伟大的地方 只可远观而不可亵玩焉</p>
</blockquote>
<hr>
<h1 id="Nginx-设置备用服务器"><a href="#Nginx-设置备用服务器" class="headerlink" title="Nginx 设置备用服务器"></a>Nginx 设置备用服务器</h1><p><strong>官方 Example Configuration</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">upstream backend &#123;</div><div class="line">    server backend1.example.com       weight=5;</div><div class="line">    server backend2.example.com:8080;</div><div class="line">    server unix:/tmp/backend3;</div><div class="line"></div><div class="line">    server backup1.example.com:8080   backup;</div><div class="line">    server backup2.example.com:8080   backup;</div><div class="line">&#125;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">    location / &#123;</div><div class="line">        proxy_pass http://backend;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>官方的说法是</strong><br>默认情况下，请求会根据权重在服务器之间请求。在上面的例子中，每7请求将被分配如下：5个请求到<code>backend1.example.com</code>、1个请求到<code>backend2.example.com:8080</code>、1个请求到<code>unix:/tmp/backend3</code>。如果与服务器的通信的过程中发生了错误，请求将被传递到下一个服务器，等等，直到尝试了所有的运作的服务器都放生错误，请求将请求剩下的备用服务器地址。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">upstream backend &#123;</div><div class="line">    server www.l-zm.com        weight=<span class="number">5</span>;</div><div class="line">    server www.l-zm.com:<span class="number">8080</span>;</div><div class="line"></div><div class="line">    server www.l-zm.com:<span class="number">8081</span>   backup;</div><div class="line">&#125;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">    listen        <span class="number">80</span>;</div><div class="line">    server_name   localhost;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        index      index.html</div><div class="line">        proxy_pass http:<span class="comment">//backend;</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<h1 id="TODO：不间断更新中"><a href="#TODO：不间断更新中" class="headerlink" title="TODO：不间断更新中"></a>TODO：不间断更新中</h1><p><br><br><code>Nginx</code> <code>服务器</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h1&gt;&lt;p&gt;一般情况下，项目上线可能会选在凌晨时刻进行，比如之前在中国电信，项目上线要等到凌晨一点，由测试给出最终版本项目文件，然后等待运维部署上线，我
    
    </summary>
    
    
      <category term="Nginx" scheme="http://yoursite.com/tags/Nginx/"/>
    
      <category term="服务器" scheme="http://yoursite.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>iOS 设置 Launch Image 启动图片尺寸 (闪图)</title>
    <link href="http://yoursite.com/2016/09/27/010%20iOS%20%E8%AE%BE%E7%BD%AE%20Launch%20Image%20%E5%90%AF%E5%8A%A8%E5%9B%BE%E7%89%87%E5%B0%BA%E5%AF%B8%20(%E9%97%AA%E5%9B%BE)%20/"/>
    <id>http://yoursite.com/2016/09/27/010 iOS 设置 Launch Image 启动图片尺寸 (闪图) /</id>
    <published>2016-09-27T00:00:00.000Z</published>
    <updated>2016-09-26T17:26:58.000Z</updated>
    
    <content type="html"><![CDATA[<table>
<thead>
<tr>
<th style="text-align:center">iPhone  Portrait iOS 8,9</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Retina HD 5.5</td>
<td>( 1242 * 2208 )  @3x  ( 6 plus )</td>
</tr>
<tr>
<td style="text-align:center">Retina HD 4.7</td>
<td>( 750 * 1334 )  @2x  ( 6 )</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPhone  Landscape iOS 8,9  ( 横屏 )</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Retina HD 5.5</td>
<td>( 2208 * 1242 )  @3x  ( 6 plus )</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPhone  Portrait iOS 7-9</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2x</td>
<td>( 640 * 960 )  @2x  ( 4/4s )</td>
</tr>
<tr>
<td style="text-align:center">Retina 4</td>
<td>( 640 * 1136 )  @2x  ( 5/5s/5c )</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPhone  Portrait iOS 5,6</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 320 * 480 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 640 * 960 )  @2x</td>
</tr>
<tr>
<td style="text-align:center">Retina 4</td>
<td>( 640 * 1136 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPad  Portrait iOS 7-9</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 768 * 1024 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 1536 * 2048 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPad  Landscape iOS 7-9  ( 横屏 )</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 1024 * 768 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 2048 * 1536 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPad  Portrait iOS 5,6</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 768 * 1024 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 1536 * 2048 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPad  Landscape iOS 5,6</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 1024 * 768 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 2048 * 1536 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPad  Portrait Without Status Bar iOS 5,6</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 768 * 1004 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 1536 * 2008 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:center">iPad  Landscape Without Status Bar iOS 5,6</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1x</td>
<td>( 1024 * 748 )  @1x</td>
</tr>
<tr>
<td style="text-align:center">2x</td>
<td>( 2048 * 1496 )  @2x</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">evice</th>
<th style="text-align:left">Portrait size</th>
<th style="text-align:left">Landscape size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">iPhone 6s Plus, iPhone 6 Plus</td>
<td style="text-align:left">1080px by 1920px</td>
<td style="text-align:left">1920px by 1080px</td>
</tr>
<tr>
<td style="text-align:left">iPhone 6s, iPhone 6</td>
<td style="text-align:left">750px by 1334px</td>
<td style="text-align:left">1334px by 750px</td>
</tr>
<tr>
<td style="text-align:left">iPhone SE</td>
<td style="text-align:left">640px by 1136px</td>
<td style="text-align:left">1136px by 640px</td>
</tr>
<tr>
<td style="text-align:left">12.9-inch iPad Pro</td>
<td style="text-align:left">2048px by 2732px</td>
<td style="text-align:left">2732px by 2048px</td>
</tr>
<tr>
<td style="text-align:left">9.7-inch iPad Pro, iPad Air 2, iPad mini 4, iPad mini 2</td>
<td style="text-align:left">1536px by 2048px</td>
<td style="text-align:left">2048px by 1536px</td>
</tr>
</tbody>
</table>
<p><strong>如果显示不正常, 把 App 卸载了重新安装下</strong></p>
<p><br></p>
<p><strong>延长显示时间代码 ( 在第一个加载页面的 viewDidLoad 中添加 )</strong><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">super</span>.viewDidLoad()</div><div class="line">    <span class="comment">// LaunchImage 显示时间延长</span></div><div class="line">    <span class="type">NSThread</span>.sleepForTimeInterval(<span class="number">3.0</span>)<span class="comment">//延长3秒</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><br><br><code>iOS</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;iPhone  Portrait iOS 8,9&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>Java 中 System.getProperty() 方法可以获取系统的那些值</title>
    <link href="http://yoursite.com/2016/09/27/009%20Java%20%E4%B8%AD%20System.getProperty()%20%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%82%A3%E4%BA%9B%E5%80%BC/"/>
    <id>http://yoursite.com/2016/09/27/009 Java 中 System.getProperty() 方法可以获取系统的那些值/</id>
    <published>2016-09-27T00:00:00.000Z</published>
    <updated>2016-09-26T17:04:54.000Z</updated>
    
    <content type="html"><![CDATA[<table>
<thead>
<tr>
<th>-</th>
<th>-</th>
</tr>
</thead>
<tbody>
<tr>
<td>java.version</td>
<td>Java 运行时环境版本</td>
</tr>
<tr>
<td>java.vendor</td>
<td>Java 运行时环境供应商</td>
</tr>
<tr>
<td>java.vendor.url</td>
<td>Java 供应商的 URL</td>
</tr>
<tr>
<td>java.home</td>
<td>Java 安装目录</td>
</tr>
<tr>
<td>java.vm.specification.version</td>
<td>Java 虚拟机规范版本</td>
</tr>
<tr>
<td>java.vm.specification.vendor</td>
<td>Java 虚拟机规范供应商</td>
</tr>
<tr>
<td>java.vm.specification.name</td>
<td>Java 虚拟机规范名称</td>
</tr>
<tr>
<td>java.vm.version</td>
<td>Java 虚拟机实现版本</td>
</tr>
<tr>
<td>java.vm.vendor</td>
<td>Java 虚拟机实现供应商</td>
</tr>
<tr>
<td>java.vm.name</td>
<td>Java 虚拟机实现名称</td>
</tr>
<tr>
<td>java.specification.version</td>
<td>Java 运行时环境规范版本</td>
</tr>
<tr>
<td>java.specification.vendor</td>
<td>Java 运行时环境规范供应商</td>
</tr>
<tr>
<td>java.specification.name</td>
<td>Java 运行时环境规范名称</td>
</tr>
<tr>
<td>java.class.version</td>
<td>Java 类格式版本号</td>
</tr>
<tr>
<td>java.class.path</td>
<td>Java 类路径</td>
</tr>
<tr>
<td>java.library.path</td>
<td>加载库时搜索的路径列表</td>
</tr>
<tr>
<td>java.io.tmpdir</td>
<td>默认的临时文件路径</td>
</tr>
<tr>
<td>java.compiler</td>
<td>要使用的 JIT 编译器的名称</td>
</tr>
<tr>
<td>java.ext.dirs</td>
<td>一个或多个扩展目录的路径</td>
</tr>
<tr>
<td>os.name</td>
<td>操作系统的名称</td>
</tr>
<tr>
<td>os.arch</td>
<td>操作系统的架构</td>
</tr>
<tr>
<td>os.version</td>
<td>操作系统的版本</td>
</tr>
<tr>
<td>file.separator</td>
<td>文件分隔符（在 UNIX 系统中是“/”）</td>
</tr>
<tr>
<td>path.separator</td>
<td>路径分隔符（在 UNIX 系统中是“:”）</td>
</tr>
<tr>
<td>line.separator</td>
<td>行分隔符（在 UNIX 系统中是“/n”）</td>
</tr>
<tr>
<td>user.name</td>
<td>用户的账户名称</td>
</tr>
<tr>
<td>user.home</td>
<td>用户的主目录</td>
</tr>
<tr>
<td>user.dir</td>
<td>用户的当前工作目录</td>
</tr>
</tbody>
</table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">System.getProperty(<span class="string">"user.dir"</span>)</div></pre></td></tr></table></figure>
<p><br><br><code>Java</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;th&gt;-&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;java.version&lt;/td&gt;
&lt;td&gt;Java 运行时环境版本&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;java.vendo
    
    </summary>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Struts 各版本 jar包 下载</title>
    <link href="http://yoursite.com/2016/09/27/008%20Struts%20%E5%90%84%E7%89%88%E6%9C%AC%20jar%E5%8C%85%20%E4%B8%8B%E8%BD%BD/"/>
    <id>http://yoursite.com/2016/09/27/008 Struts 各版本 jar包 下载/</id>
    <published>2016-09-27T00:00:00.000Z</published>
    <updated>2016-09-26T16:44:48.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://archive.apache.org/dist/struts/binaries/" target="_blank" rel="external">http://archive.apache.org/dist/struts/binaries/</a></p>
<pre><code>http://archive.apache.org/dist/struts/binaries/
</code></pre><p><br><br><code>Struts</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://archive.apache.org/dist/struts/binaries/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://archive.apache.org/dist/struts/binaries/&lt;
    
    </summary>
    
    
      <category term="Struts" scheme="http://yoursite.com/tags/Struts/"/>
    
  </entry>
  
  <entry>
    <title>Mac 电脑 U盘 重装系统</title>
    <link href="http://yoursite.com/2016/09/27/006%20Mac%20%E7%94%B5%E8%84%91%20U%E7%9B%98%20%E9%87%8D%E8%A3%85%E7%B3%BB%E7%BB%9F/"/>
    <id>http://yoursite.com/2016/09/27/006 Mac 电脑 U盘 重装系统/</id>
    <published>2016-09-27T00:00:00.000Z</published>
    <updated>2016-09-26T16:40:19.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h1><p><code>Install\ macOS\ Sierra.app</code></p>
<p><strong> 最新的系统可以去 Apple Store 里面下载 </strong></p>
<h1 id="U盘"><a href="#U盘" class="headerlink" title="U盘"></a>U盘</h1><p><code>lzmvlzm</code></p>
<p><strong> U盘名称可以到磁盘工具里面查看 </strong></p>
<h1 id="终端输入"><a href="#终端输入" class="headerlink" title="终端输入"></a>终端输入</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo /Applications/Install\ macOS\ Sierra.app/Contents/Resources/createinstallmedia --volume /Volumes/lzmvlzm --applicationpath /Applications/Install\ macOS\ Sierra.app --nointeraction</div></pre></td></tr></table></figure>
<h1 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h1><p><strong> 开机按下 <code>option</code> 键 </strong></p>
<p><br><br><code>Mac</code> <code>系统</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;系统&quot;&gt;&lt;a href=&quot;#系统&quot; class=&quot;headerlink&quot; title=&quot;系统&quot;&gt;&lt;/a&gt;系统&lt;/h1&gt;&lt;p&gt;&lt;code&gt;Install\ macOS\ Sierra.app&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 最新的系统可以去 Apple
    
    </summary>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
      <category term="系统" scheme="http://yoursite.com/tags/%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Spring 各版本 jar包 下载</title>
    <link href="http://yoursite.com/2016/09/27/007%20Spring%20%E5%90%84%E7%89%88%E6%9C%AC%20jar%E5%8C%85%20%E4%B8%8B%E8%BD%BD/"/>
    <id>http://yoursite.com/2016/09/27/007 Spring 各版本 jar包 下载/</id>
    <published>2016-09-27T00:00:00.000Z</published>
    <updated>2016-09-26T16:45:23.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://repo.spring.io/release/org/springframework/spring/" target="_blank" rel="external">http://repo.spring.io/release/org/springframework/spring/</a></p>
<pre><code>http://repo.spring.io/release/org/springframework/spring/
</code></pre><p><br><br><code>Spring</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://repo.spring.io/release/org/springframework/spring/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://repo.spring.io/release/org/spri
    
    </summary>
    
    
      <category term="Spring" scheme="http://yoursite.com/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Apple 系统固件下载地址</title>
    <link href="http://yoursite.com/2016/09/26/005%20Apple%20%E7%B3%BB%E7%BB%9F%E5%9B%BA%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80/"/>
    <id>http://yoursite.com/2016/09/26/005 Apple 系统固件下载地址/</id>
    <published>2016-09-26T00:00:00.000Z</published>
    <updated>2016-09-25T18:41:47.000Z</updated>
    
    <content type="html"><![CDATA[<p><br><br><a href="https://support.apple.com/zh_CN/downloads/" target="_blank" rel="external">https://support.apple.com/zh_CN/downloads/</a></p>
<p><br><br><code>Apple</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://support.apple.com/zh_CN/downloads/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://support.apple.com/zh_CN/downloads/&lt;/a
    
    </summary>
    
    
      <category term="Apple" scheme="http://yoursite.com/tags/Apple/"/>
    
  </entry>
  
  <entry>
    <title>MySQL 数据库编码方式修改</title>
    <link href="http://yoursite.com/2016/09/26/004%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BC%96%E7%A0%81%E6%96%B9%E5%BC%8F%E4%BF%AE%E6%94%B9/"/>
    <id>http://yoursite.com/2016/09/26/004 MySQL 数据库编码方式修改/</id>
    <published>2016-09-26T00:00:00.000Z</published>
    <updated>2016-09-26T01:34:17.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查看-MySQL-编码"><a href="#查看-MySQL-编码" class="headerlink" title="查看 MySQL 编码"></a>查看 MySQL 编码</h1><p><strong>进入 MySQL 输入</strong> <code>status</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">mysql  Ver 14.14 Distrib 5.6.33, <span class="keyword">for</span> debian-linux-gnu (x86_64) using  EditLine wrapper</div><div class="line">Connection id: 249</div><div class="line">Current database:</div><div class="line">Current user: root@localhost</div><div class="line">SSL: Not <span class="keyword">in</span> use</div><div class="line">Current pager: stdout</div><div class="line">Using outfile: <span class="string">''</span></div><div class="line">Using delimiter: ;</div><div class="line">Server version: 5.6.33-0ubuntu0.14.04.1 (Ubuntu)</div><div class="line">Protocol version: 10</div><div class="line">Connection: Localhost via UNIX socket</div><div class="line">Server characterset: utf8</div><div class="line">Db     characterset: utf8</div><div class="line">Client characterset: utf8</div><div class="line">Conn.  characterset: utf8</div><div class="line">UNIX socket: /var/run/mysqld/mysqld.sock</div><div class="line">Uptime: 5 hours 16 min 18 sec</div></pre></td></tr></table></figure>
<p><strong>如果下面这四个不是</strong> <code>utf8</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Server characterset: utf8</div><div class="line">Db     characterset: utf8</div><div class="line">Client characterset: utf8</div><div class="line">Conn.  characterset: utf8</div></pre></td></tr></table></figure>
<p><strong>保存中文的时候可能会乱码</strong></p>
<h1 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim /etc/mysql/my.cnf</div></pre></td></tr></table></figure>
<pre><code>[client] &gt; 下面追加  default-character-set=utf8
[mysqld] &gt; 下面追加  character-set-server=utf8
[mysql] &gt; 下面追加  no-auto-rehash
</code></pre><h1 id="重启-MySQL-数据库"><a href="#重启-MySQL-数据库" class="headerlink" title="重启 MySQL 数据库"></a>重启 MySQL 数据库</h1><p><strong>输入</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ service mysql restart</div></pre></td></tr></table></figure></p>
<p> (重启数据库)</p>
<p><br><br><code>MySQL</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;查看-MySQL-编码&quot;&gt;&lt;a href=&quot;#查看-MySQL-编码&quot; class=&quot;headerlink&quot; title=&quot;查看 MySQL 编码&quot;&gt;&lt;/a&gt;查看 MySQL 编码&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;进入 MySQL 输入&lt;/strong&gt; &lt;code
    
    </summary>
    
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>Mac 修改 Dock 栏隐藏的速度</title>
    <link href="http://yoursite.com/2016/09/25/003%20Mac%20%E4%BF%AE%E6%94%B9%20Dock%20%E6%A0%8F%E9%9A%90%E8%97%8F%E7%9A%84%E9%80%9F%E5%BA%A6/"/>
    <id>http://yoursite.com/2016/09/25/003 Mac 修改 Dock 栏隐藏的速度/</id>
    <published>2016-09-25T00:00:00.000Z</published>
    <updated>2016-09-25T18:34:08.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="修改-Dock-栏显示隐藏的速度（-0秒-0-5秒-默认是-1-）"><a href="#修改-Dock-栏显示隐藏的速度（-0秒-0-5秒-默认是-1-）" class="headerlink" title="修改 Dock 栏显示隐藏的速度（ 0秒 | 0.5秒 默认是 1 ）"></a>修改 Dock 栏显示隐藏的速度（ 0秒 | 0.5秒 默认是 1 ）</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ defaults write com.apple.dock autohide-delay -float 0 &amp;&amp; killall Dock</div></pre></td></tr></table></figure>
<h1 id="恢复默认设置"><a href="#恢复默认设置" class="headerlink" title="恢复默认设置"></a>恢复默认设置</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ defaults delete com.apple.Dock autohide-delay &amp;&amp; killall Dock</div></pre></td></tr></table></figure>
<p><br><br><code>Mac</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;修改-Dock-栏显示隐藏的速度（-0秒-0-5秒-默认是-1-）&quot;&gt;&lt;a href=&quot;#修改-Dock-栏显示隐藏的速度（-0秒-0-5秒-默认是-1-）&quot; class=&quot;headerlink&quot; title=&quot;修改 Dock 栏显示隐藏的速度（ 0秒 | 0.5
    
    </summary>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>Mac 显示隐藏文件</title>
    <link href="http://yoursite.com/2016/09/25/002%20Mac%20%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6/"/>
    <id>http://yoursite.com/2016/09/25/002 Mac 显示隐藏文件/</id>
    <published>2016-09-25T00:00:00.000Z</published>
    <updated>2016-09-25T18:32:45.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="终端输入"><a href="#终端输入" class="headerlink" title="终端输入"></a>终端输入</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ defaults write com.apple.finder AppleShowAllFiles -bool <span class="literal">true</span></div></pre></td></tr></table></figure>
<h1 id="生效"><a href="#生效" class="headerlink" title="生效"></a>生效</h1><p><strong>强制退出 Finder</strong>  <code>commend + option + esc</code> </p>
<p><br></p>
<h1 id="恢复原来的样子"><a href="#恢复原来的样子" class="headerlink" title="恢复原来的样子"></a>恢复原来的样子</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ defaults write com.apple.finder AppleShowAllFiles -bool <span class="literal">false</span></div></pre></td></tr></table></figure>
<p><br><br><code>Mac</code></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;终端输入&quot;&gt;&lt;a href=&quot;#终端输入&quot; class=&quot;headerlink&quot; title=&quot;终端输入&quot;&gt;&lt;/a&gt;终端输入&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre
    
    </summary>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
  </entry>
  
</feed>
